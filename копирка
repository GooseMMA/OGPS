import sys
import os
from PyQt5.QtWidgets import QApplication, QMainWindow, QLabel, QMessageBox
from PyQt5.QtCore import Qt
from PyQt5.QtGui import QFont

# Импортируем систему лицензий
from core import license_manager


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.init_ui()

    def init_ui(self):
        self.setWindowTitle("AutoClicker PRO")
        self.setGeometry(600, 300, 600, 400)
        self.setStyleSheet("background-color: #121212; color: white;")

        self.label = QLabel("✅ Добро пожаловать в AutoClicker PRO!", self)
        self.label.setAlignment(Qt.AlignCenter)
        self.label.setFont(QFont("Segoe UI", 14))
        self.label.setGeometry(50, 150, 500, 50)

        self.show()


def main():
    app = QApplication(sys.argv)

    # Проверяем лицензию перед запуском основного окна
    if not license_manager.ensure_license_interactive():
        QMessageBox.critical(None, "Ошибка лицензии",
                             "❌ Лицензия недействительна или отсутствует.\n"
                             "Перезапустите программу после активации.")
        sys.exit(0)

    # Если всё ок — запускаем GUI
    window = MainWindow()
    window.show()

    sys.exit(app.exec_())


if __name__ == "__main__":
    main()