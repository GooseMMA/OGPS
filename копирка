<Window x:Class="OGPSLauncher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="OGPS Launcher" Height="700" Width="1300"
        WindowStartupLocation="CenterScreen" ResizeMode="NoResize"
        Background="{DynamicResource MaterialDesignPaper}">
    <Grid Margin="0">
    <!-- Фон -->
    <Image x:Name="BackgroundImage" Stretch="UniformToFill" />

    <!-- Основной контент -->
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Верхняя панель: SCREEN + NEWS + LOGO -->
        <Grid Grid.Row="0" Margin="0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- SCREEN NEW UPDATE -->
            <Border Grid.Column="0" Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,10,0">
                <StackPanel>
                    <Image x:Name="UpdateScreenshot" Width="200" Height="150" Stretch="UniformToFill" />
                </StackPanel>
            </Border>

            <!-- NEWS -->
            <Border Grid.Column="1" Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,10,0">
                <StackPanel>
                    <TextBlock Text="📄 НОВОСТИ" FontSize="20" FontWeight="Bold" Foreground="Blue" Margin="0,0,0,10"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="150">
                        <TextBlock x:Name="NewsText" TextWrapping="Wrap" Foreground="Black" FontSize="14"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>

            <!-- LOGO -->
            <Border Grid.Column="2" Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10" VerticalAlignment="Top">
                <Image Source="pack://application:,,,/Resources/logo.png" Width="80" Height="80" />
            </Border>
        </Grid>

        <!-- Центральная панель: Что добавили нового + PATCHES -->
        <Grid Grid.Row="1" Margin="0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Что добавили нового -->
            <Border Grid.Column="0" Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10" Margin="0,0,10,0">
                <StackPanel>
                    <TextBlock Text="✨ Что добавили нового" FontSize="18" FontWeight="Bold" Margin="0,0,0,5"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="150">
                        <TextBlock x:Name="WhatAddedText" TextWrapping="Wrap" Foreground="Black" FontSize="14"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>

            <!-- PATCHES -->
            <Border Grid.Column="1" Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="10">
                <StackPanel>
                    <TextBlock Text="📝 ПАТЧНОУТЫ" FontSize="18" FontWeight="Bold" Margin="0,0,0,5"/>
                    <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="150">
                        <TextBlock x:Name="PatchNotesText" TextWrapping="Wrap" Foreground="Black" FontSize="14"/>
                    </ScrollViewer>
                </StackPanel>
            </Border>
        </Grid>

        <!-- Нижняя панель: PLAY + Меню + Прогресс + Кнопки -->
        <Grid Grid.Row="2" Margin="0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Кнопка PLAY / Установить -->
            <Button x:Name="MainButton" Content="▶ Play" IsEnabled="False"
                    Style="{StaticResource MaterialDesignRaisedButton}" 
                    Click="MainButton_Click" MinWidth="120" Background="Green" Foreground="White"/>

            <!-- Меню -->
            <Button x:Name="MenuButton" Content="⋮" 
                    Grid.Column="1" Margin="10,0"
                    Width="30" Height="30"
                    Style="{StaticResource MaterialDesignFloatingActionMiniButton}"
                    Click="MenuButton_Click" IsEnabled="False"/>

            <!-- Прогресс бар -->
            <ProgressBar x:Name="InstallProgressBar" Grid.Column="2" Height="10" Margin="10,0" Visibility="Collapsed" 
                         Style="{StaticResource MaterialDesignCircularProgressBar}"/>

            <!-- Статус установки -->
            <TextBlock x:Name="StatusText" Grid.Column="3" Text="Выберите папку для установки игры"
                       VerticalAlignment="Center" FontSize="14" Foreground="Gray"/>
        </Grid>

        <!-- Всплывающее меню -->
        <Popup x:Name="OptionsMenu" StaysOpen="False" Placement="Bottom" PlacementTarget="{Binding ElementName=MenuButton}">
            <Border Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="4" Padding="8">
                <StackPanel>
                    <Button Content="Открыть папку с игрой" Click="OpenFolderFromMenu_Click" 
                            Style="{StaticResource MaterialDesignFlatButton}" MinWidth="180" HorizontalContentAlignment="Left"/>
                    <Button Content="Удалить всё (игра + настройки)" Click="UninstallFromMenu_Click" 
                            Style="{StaticResource MaterialDesignFlatButton}" MinWidth="180" HorizontalContentAlignment="Left" 
                            Foreground="Red"/>
                </StackPanel>
            </Border>
        </Popup>

        <!-- Кнопки Discord, Сайт, GitHub (под логотипом) -->
        <StackPanel Grid.Row="0" Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,10">
            <Button Content="Discord" Click="DiscordButton_Click" 
                    Style="{StaticResource MaterialDesignRaisedButton}" Margin="5" Background="#5865F2" Foreground="White"  />
            <Button Content="Сайт" Click="WebsiteButton_Click" 
                    Style="{StaticResource MaterialDesignRaisedButton}" Margin="5" Background="#3498DB" Foreground="White" />
            <Button Content="GitHub" Click="GitHubButton_Click" 
                    Style="{StaticResource MaterialDesignRaisedButton}" Margin="5" Background="#333" Foreground="White" />
        </StackPanel>

        <!-- Анимация загрузки -->
        <Border x:Name="LoadingOverlay" Visibility="Collapsed" Background="#80000000">
            <Grid>
                <ProgressBar IsIndeterminate="True" Width="200" Height="20" 
                             HorizontalAlignment="Center" VerticalAlignment="Center" 
                             Style="{StaticResource MaterialDesignCircularProgressBar}"/>
                <TextBlock Text="Загрузка..." Foreground="White" FontSize="16" 
                           HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,50,0,0"/>
            </Grid>
        </Border>
    </Grid>
</Grid>
</Window>
